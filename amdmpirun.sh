# On GPU Node, run the mpirun command to validate performance with all_reduce_perf
mpirun -mca pml ucx -mca coll ^hcoll -mca plm_rsh_args '-p 22' -mca btl_tcp_if_include eth0   --allow-run-as-root -N 8 -np 8 --bind-to numa -x RX_QUEUE_LEN=8192 -x IB_RX_QUEUE_LEN=8192 -x UCX_TLS=tcp -x UCX_NET_DEVICES=eth0 -x HCOLL_ENABLE_MCAST_ALL=0 -x coll_hcoll_enable=0 -x NCCL_DEBUG=warn -x NCCL_CUMEM_ENABLE=0 -x NCCL_IB_TIMEOUT=22 -x NCCL_IB_SL=0 -x NCCL_IB_TC=41 -x NCCL_IB_GID_INDEX=3 -x NCCL_IB_QPS_PER_CONNECTION=1 -x NCCL_IB_SPLIT_DATA_ON_QPS=0 -x NCCL_IB_HCA='=mlx5_0,mlx5_2,mlx5_3,mlx5_4,mlx5_5,mlx5_7,mlx5_8,mlx5_9' -x NCCL_NET_PLUGIN=none -x LD_LIBRARY_PATH /opt/rccl-tests/build/all_reduce_perf -b 512KB -e 8G -f 2 -g 1 -n 50